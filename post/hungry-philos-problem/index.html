<!doctype html><html lang=en><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>The Hungry Philosophers Problem</title><header><!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>The Hungry Philosophers Problem | Coding With Matt</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/custom.css><link rel=stylesheet href=/css/plays.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><a href=/swiftnote/>Swift</a></li></ul><hr></nav></header></head><body><main><div class=article-meta><h1><span class=title>The Hungry Philosophers Problem</span></h1><h2 class=date>2025/04/05</h2></div><div class=content><h2 id=hungry-philosophers-problem>Hungry Philosophers Problem</h2><p>A group of philosophers sit around a table. Each needs two forks (left and right) to eat. They alternate between <strong>thinking</strong> and <strong>eating</strong>, but no two neighbors can eat at the same time. Assume that there are n philosophers and n+1 forks.</p><p>The challenge:</p><ul><li>Prevent <strong>deadlock</strong> (no one can eat)</li><li>Prevent <strong>starvation</strong> (someone never eats)</li><li>Allow <strong>fair and efficient</strong> access to forks</li></ul><h2 id=how-to-solve-it>How to solve it?</h2><p>Only let 1 philosopher eat at a time. Everyone else must wait. Then move onto next guy who has not eaten.
This is fair but not efficient. Can you come up with a better solution?</p><h2 id=my-solution--in-swift>My Solution &mldr;. In Swift</h2><p><div style=position:relative;padding-bottom:56.25%;height:0;overflow:hidden><iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share; fullscreen" loading=eager referrerpolicy=strict-origin-when-cross-origin src="https://www.youtube.com/embed/no1CXrHfjIE?autoplay=0&amp;controls=1&amp;end=0&amp;loop=0&amp;mute=0&amp;start=0" style=position:absolute;top:0;left:0;width:100%;height:100%;border:0 title="YouTube video"></iframe></div><a href=solution.swift>swift-source</a></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-swift data-lang=swift><span style=display:flex><span><span style=color:#75715e>// A better and safer solution to visualize the Dining Philosophers on a circle</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// avoiding adjacent philosophers from eating at the same time, even when `n` is odd</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>UIKit</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ViewController</span>: UIViewController {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> n = <span style=color:#ae81ff>5</span> { <span style=color:#75715e>// Default number of philosophers</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>didSet</span> {
</span></span><span style=display:flex><span>            countLabel.text = <span style=color:#e6db74>&#34;Philosophers: </span><span style=color:#e6db74>\(</span>n<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>            resetPhilosophers()
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> roundNumber = <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>didSet</span> {
</span></span><span style=display:flex><span>            roundLabel.text = <span style=color:#e6db74>&#34;Round </span><span style=color:#e6db74>\(</span>roundNumber<span style=color:#e6db74>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> philosopherViews: [UILabel] = []
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> advanceButton = UIButton(type: .system)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> roundLabel = UILabel()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> countLabel = UILabel()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>let</span> slider = UISlider()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> centerPoint: CGPoint {
</span></span><span style=display:flex><span>        CGPoint(x: view.bounds.midX, y: view.bounds.midY)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>viewDidLoad</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.viewDidLoad()
</span></span><span style=display:flex><span>        setupUI()
</span></span><span style=display:flex><span>        resetPhilosophers()
</span></span><span style=display:flex><span>        renderRound()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>override</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>viewDidLayoutSubviews</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>super</span>.viewDidLayoutSubviews()
</span></span><span style=display:flex><span>        layoutPhilosophers()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>setupUI</span>() {
</span></span><span style=display:flex><span>        advanceButton.setTitle(<span style=color:#e6db74>&#34;Advance Round&#34;</span>, <span style=color:#66d9ef>for</span>: .normal)
</span></span><span style=display:flex><span>        advanceButton.translatesAutoresizingMaskIntoConstraints = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        view.addSubview(advanceButton)
</span></span><span style=display:flex><span>        advanceButton.addTarget(<span style=color:#66d9ef>self</span>, action: <span style=color:#66d9ef>#selector</span>(advanceRound), <span style=color:#66d9ef>for</span>: .touchUpInside)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        roundLabel.translatesAutoresizingMaskIntoConstraints = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        view.addSubview(roundLabel)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        countLabel.translatesAutoresizingMaskIntoConstraints = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        view.addSubview(countLabel)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        slider.minimumValue = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>        slider.maximumValue = <span style=color:#ae81ff>21</span>
</span></span><span style=display:flex><span>        slider.value = Float(n)
</span></span><span style=display:flex><span>        slider.translatesAutoresizingMaskIntoConstraints = <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>        slider.addTarget(<span style=color:#66d9ef>self</span>, action: <span style=color:#66d9ef>#selector</span>(sliderChanged), <span style=color:#66d9ef>for</span>: .valueChanged)
</span></span><span style=display:flex><span>        view.addSubview(slider)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        NSLayoutConstraint.activate([
</span></span><span style=display:flex><span>            advanceButton.bottomAnchor.constraint(equalTo: view.safeAreaLayoutGuide.bottomAnchor, constant: <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>),
</span></span><span style=display:flex><span>            advanceButton.centerXAnchor.constraint(equalTo: view.centerXAnchor),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            slider.bottomAnchor.constraint(equalTo: advanceButton.topAnchor, constant: <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>),
</span></span><span style=display:flex><span>            slider.leadingAnchor.constraint(equalTo: view.leadingAnchor, constant: <span style=color:#ae81ff>20</span>),
</span></span><span style=display:flex><span>            slider.trailingAnchor.constraint(equalTo: view.trailingAnchor, constant: <span style=color:#f92672>-</span><span style=color:#ae81ff>20</span>),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            countLabel.topAnchor.constraint(equalTo: view.safeAreaLayoutGuide.topAnchor, constant: <span style=color:#ae81ff>10</span>),
</span></span><span style=display:flex><span>            countLabel.centerXAnchor.constraint(equalTo: view.centerXAnchor),
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            roundLabel.topAnchor.constraint(equalTo: countLabel.bottomAnchor, constant: <span style=color:#ae81ff>10</span>),
</span></span><span style=display:flex><span>            roundLabel.centerXAnchor.constraint(equalTo: view.centerXAnchor),
</span></span><span style=display:flex><span>        ])
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>resetPhilosophers</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> label <span style=color:#66d9ef>in</span> philosopherViews { label.removeFromSuperview() }
</span></span><span style=display:flex><span>        philosopherViews.removeAll()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>_</span> <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;n {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> label = UILabel()
</span></span><span style=display:flex><span>            label.textAlignment = .center
</span></span><span style=display:flex><span>            label.font = UIFont.systemFont(ofSize: <span style=color:#ae81ff>16</span>)
</span></span><span style=display:flex><span>            label.text = <span style=color:#e6db74>&#34;üçΩ&#34;</span>
</span></span><span style=display:flex><span>            label.backgroundColor = .clear
</span></span><span style=display:flex><span>            philosopherViews.append(label)
</span></span><span style=display:flex><span>            view.addSubview(label)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        layoutPhilosophers()
</span></span><span style=display:flex><span>        renderRound()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>layoutPhilosophers</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> radius: CGFloat = min(view.bounds.width, view.bounds.height) <span style=color:#f92672>/</span> <span style=color:#ae81ff>2.5</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (i, label) <span style=color:#66d9ef>in</span> philosopherViews.enumerated() {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> angle = CGFloat(i) <span style=color:#f92672>*</span> (<span style=color:#ae81ff>2</span> <span style=color:#f92672>*</span> .pi <span style=color:#f92672>/</span> CGFloat(n))
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> x = centerPoint.x <span style=color:#f92672>+</span> radius <span style=color:#f92672>*</span> cos(angle)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>let</span> y = centerPoint.y <span style=color:#f92672>+</span> radius <span style=color:#f92672>*</span> sin(angle)
</span></span><span style=display:flex><span>            label.bounds = CGRect(x: <span style=color:#ae81ff>0</span>, y: <span style=color:#ae81ff>0</span>, width: <span style=color:#ae81ff>40</span>, height: <span style=color:#ae81ff>40</span>)
</span></span><span style=display:flex><span>            label.center = CGPoint(x: x, y: y)
</span></span><span style=display:flex><span>            label.layer.cornerRadius = <span style=color:#ae81ff>20</span>
</span></span><span style=display:flex><span>            label.layer.masksToBounds = <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>eatingIndices</span>(forRound round: Int, total: Int) -&gt; Set&lt;Int&gt; {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Use a fixed stride to space out eating philosophers</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> indices = Set&lt;Int&gt;()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> stride = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>var</span> start = round <span style=color:#f92672>%</span> total
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>_</span> <span style=color:#66d9ef>in</span> <span style=color:#ae81ff>0.</span>.&lt;total {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> indices.contains((start <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>+</span> total) <span style=color:#f92672>%</span> total) == <span style=color:#66d9ef>false</span> <span style=color:#f92672>&amp;&amp;</span>
</span></span><span style=display:flex><span>               indices.contains((start <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> total) == <span style=color:#66d9ef>false</span> {
</span></span><span style=display:flex><span>                indices.insert(start)
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            start = (start <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>) <span style=color:#f92672>%</span> total
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> indices
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>renderRound</span>() {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>let</span> eaters = eatingIndices(forRound: roundNumber, total: n)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> (i, label) <span style=color:#66d9ef>in</span> philosopherViews.enumerated() {
</span></span><span style=display:flex><span>            label.backgroundColor = eaters.contains(i) ? UIColor.green.withAlphaComponent(<span style=color:#ae81ff>0.3</span>) : .clear
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>advanceRound</span>() {
</span></span><span style=display:flex><span>        roundNumber <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        renderRound()
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>@objc</span> <span style=color:#66d9ef>func</span> <span style=color:#a6e22e>sliderChanged</span>() {
</span></span><span style=display:flex><span>        n = Int(slider.value)
</span></span><span style=display:flex><span>        roundNumber = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><p><strong>References:</strong></p><ol><li><a href=https://en.wikipedia.org/wiki/Dining_philosophers_problem>Dining philosophers problem - Wikipedia</a></li></ol></div></main><footer><footer></footer></body></html></footer></body></html>